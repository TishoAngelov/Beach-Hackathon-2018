import { Component, Input, OnInit } from '@angular/core';

import { OSM_TILE_LAYER_URL } from '@yaga/leaflet-ng2';
import { Point } from 'leaflet';

@Component({
  selector: 'wis-detail-map',
  templateUrl: './detail-map.component.html',
  styleUrls: ['./detail-map.component.scss']
})
export class DetailMapComponent implements OnInit {
  public lat = 42.2863377;
  public lng = 27.754287899999998;

  public tileLayerUrl: string = OSM_TILE_LAYER_URL;
  public iconUrl = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIYAAACGCAYAAAAYefKRAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAydpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iUGhvdG9wZWEgRWRpdG9yICh3d3cucGhvdG9wZWEuY29tKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDowRjMxOTU5OUI4Q0MxMUU4QjE2NDg5NUQ3NUVGMDc1RCIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDowRjMxOTU5QUI4Q0MxMUU4QjE2NDg5NUQ3NUVGMDc1RCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjBGMzE5NTk3QjhDQzExRThCMTY0ODk1RDc1RUYwNzVEIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjBGMzE5NTk4QjhDQzExRThCMTY0ODk1RDc1RUYwNzVEIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+s5ZPCQAABAVJREFUeNrsndGO3CAMRceI///ldldqpWmU7oQE8LV9vG8rzQyYw7VNAtgri/36+ltp9vVXyAwQgCU2GAogFALFgAFIYoARGYZRSM76KgJUB4iNfQukIh0YNoSJv/0MBIgBxOZ84VPfS4aSSEAUW7fwU4zq5WYQpdgHBusP130gBIeVhsJE+y8AiAGEEBTf7RKpXAwoBJXi/fNOgBhACE2M9zY6w2HpobBAldexrY5wGFAIKeZZe4/fu6lPDSiCKeam37J0UOyOxzP9IPQUtgFFAKW4EmLcwQAKHT8sbEMDiiBQjISZrWAAhX8/NsLRgCJJKJ3cLgvpCEv4gtFIn35qxyTfNKAIrhSL2tmAIhEUE9vbgCJg32x9CtBeWC61WFaVoBZ5oHjQfgMKZyhsw/OqG7+hHUqKv8LvCXmTVQtPKIrmFf+6/8kj3VUOrALF036OtnXg9/qUsmnHOwmYc1VydzAzDGj2PbUD/WuuDSWvkO1nmz4od7+nGhTiCtuWhIEVS7zY1onQqs4I1MILjKsOIK+Q7LvvyichpKhiKA++l1oo+eMHH/gpBiFE2robFAFPmalkFmqGWvBN2CZ6HslJu7q7Qozslfj+HwqSRDFmbMidtak3m1osVOMWwkFnq7OjDiHhFCtXV0LFYAPGIzi8AYqQFx181EM65ZjMkpSiGMPKgVoUA+OK08lBioJxhIM33aflGXm3KKIWxRUjcBxXtp6uRypKYbGv/GC3O3YKG2AQ2oqEkquDRHJaAIw7B7GvKnOTJMItHRTFcgHAiODgRGVzrpXPZIPj61bU4v/AjahJsvPMCSURQ8OGvKouGFePXVbfZgkYGGCoqMUVRUia7DagCJZvbFq3IZQ8GfzEpXEvNfCr7vn4NIsDAtRf2HpZn3Xj8sbl/84gvtafNnjc6hBARVCMJ2BdHdyzg3LFATHU4ubx2DNDgundTUdV4lX9KG97KAHGhhsHp+QmYnAYYIi10eEe9zO/NKAQCS2EErE1BvV2O/WjZvKpWCKKtSknGFFCyKf2O6oe5SqqUQSM6GoBGJhk8vxn8rQyzkQthoyHaBnyjwXqkmcWZVCLGQ/qnkKSMpRgz646fftcQy0ofXNWJZxzsUQ9ct+uTCUyNoHe/GVAARxn/iL5xJLlGKjF0oQUxcBOgYkJBmqxXDVQDECxHGCgFiSft2pxbEpYaRU6iY1PrpatQ9gcn3JfCRYYDBJOwMA0lDbcRbGoBYqBuYoJaoGhGFh8xUAtUIwhKDBCCWoBGKgFOcYDKFCLgmAABaEEAwzyCsDAAIMSFTAII4CBWmAi5SolKopBCAEMQgihhBCCYhBCAIMQgrHyiQEGFhUMwkhhMBh87FKFQpUiab8FGABWKY8jxybTegAAAABJRU5ErkJggg==';
  public iconSize: Point = new Point(38, 95);
  public iconAnchor: Point = new Point(22, 94);
  public popupAnchor: Point = new Point(-3, -76);
  public shadowUrl = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIYAAACGCAYAAAAYefKRAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAydpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iUGhvdG9wZWEgRWRpdG9yICh3d3cucGhvdG9wZWEuY29tKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDowRjMxOTU5OUI4Q0MxMUU4QjE2NDg5NUQ3NUVGMDc1RCIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDowRjMxOTU5QUI4Q0MxMUU4QjE2NDg5NUQ3NUVGMDc1RCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjBGMzE5NTk3QjhDQzExRThCMTY0ODk1RDc1RUYwNzVEIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjBGMzE5NTk4QjhDQzExRThCMTY0ODk1RDc1RUYwNzVEIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+s5ZPCQAABAVJREFUeNrsndGO3CAMRceI///ldldqpWmU7oQE8LV9vG8rzQyYw7VNAtgri/36+ltp9vVXyAwQgCU2GAogFALFgAFIYoARGYZRSM76KgJUB4iNfQukIh0YNoSJv/0MBIgBxOZ84VPfS4aSSEAUW7fwU4zq5WYQpdgHBusP130gBIeVhsJE+y8AiAGEEBTf7RKpXAwoBJXi/fNOgBhACE2M9zY6w2HpobBAldexrY5wGFAIKeZZe4/fu6lPDSiCKeam37J0UOyOxzP9IPQUtgFFAKW4EmLcwQAKHT8sbEMDiiBQjISZrWAAhX8/NsLRgCJJKJ3cLgvpCEv4gtFIn35qxyTfNKAIrhSL2tmAIhEUE9vbgCJg32x9CtBeWC61WFaVoBZ5oHjQfgMKZyhsw/OqG7+hHUqKv8LvCXmTVQtPKIrmFf+6/8kj3VUOrALF036OtnXg9/qUsmnHOwmYc1VydzAzDGj2PbUD/WuuDSWvkO1nmz4od7+nGhTiCtuWhIEVS7zY1onQqs4I1MILjKsOIK+Q7LvvyichpKhiKA++l1oo+eMHH/gpBiFE2robFAFPmalkFmqGWvBN2CZ6HslJu7q7Qozslfj+HwqSRDFmbMidtak3m1osVOMWwkFnq7OjDiHhFCtXV0LFYAPGIzi8AYqQFx181EM65ZjMkpSiGMPKgVoUA+OK08lBioJxhIM33aflGXm3KKIWxRUjcBxXtp6uRypKYbGv/GC3O3YKG2AQ2oqEkquDRHJaAIw7B7GvKnOTJMItHRTFcgHAiODgRGVzrpXPZIPj61bU4v/AjahJsvPMCSURQ8OGvKouGFePXVbfZgkYGGCoqMUVRUia7DagCJZvbFq3IZQ8GfzEpXEvNfCr7vn4NIsDAtRf2HpZn3Xj8sbl/84gvtafNnjc6hBARVCMJ2BdHdyzg3LFATHU4ubx2DNDgundTUdV4lX9KG97KAHGhhsHp+QmYnAYYIi10eEe9zO/NKAQCS2EErE1BvV2O/WjZvKpWCKKtSknGFFCyKf2O6oe5SqqUQSM6GoBGJhk8vxn8rQyzkQthoyHaBnyjwXqkmcWZVCLGQ/qnkKSMpRgz646fftcQy0ofXNWJZxzsUQ9ct+uTCUyNoHe/GVAARxn/iL5xJLlGKjF0oQUxcBOgYkJBmqxXDVQDECxHGCgFiSft2pxbEpYaRU6iY1PrpatQ9gcn3JfCRYYDBJOwMA0lDbcRbGoBYqBuYoJaoGhGFh8xUAtUIwhKDBCCWoBGKgFOcYDKFCLgmAABaEEAwzyCsDAAIMSFTAII4CBWmAi5SolKopBCAEMQgihhBCCYhBCAIMQgrHyiQEGFhUMwkhhMBh87FKFQpUiab8FGABWKY8jxybTegAAAABJRU5ErkJggg==';
  public shadowSize: Point = new Point(50, 64);
  public shadowAnchor: Point = new Point(4, 62);
  
  @Input() markers = [
    {
      locationName: 'Централен плаж Бургас',
      lat: 42.2863377,
      long: 27.754287899999998,
      flagType: 'GREEN',
      timestamp: 1537006006219,
    },
    {
      locationName: 'Централен плаж Друг',
      lat: 43.2863377,
      long: 27.754287899999998,
      flagType: 'RED',
      timestamp: 1537006006219,
    }
  ]

  ngOnInit() {
    navigator.geolocation.getCurrentPosition(position=> {
      this.lat = position.coords.latitude;
      this.lng = position.coords.longitude;
    })
  }

  
}
