import { Component, Input, OnInit } from '@angular/core';

import { OSM_TILE_LAYER_URL } from '@yaga/leaflet-ng2';
import { Point } from 'leaflet';

@Component({
  selector: 'wis-detail-map',
  templateUrl: './detail-map.component.html',
  styleUrls: ['./detail-map.component.scss']
})
export class DetailMapComponent implements OnInit {
  public lat = 42.2863377;
  public lng = 27.754287899999998;

  public tileLayerUrl: string = OSM_TILE_LAYER_URL;
  public iconUrl = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIYAAACGCAYAAAAYefKRAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAydpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iUGhvdG9wZWEgRWRpdG9yICh3d3cucGhvdG9wZWEuY29tKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDowRjMxOTU5OUI4Q0MxMUU4QjE2NDg5NUQ3NUVGMDc1RCIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDowRjMxOTU5QUI4Q0MxMUU4QjE2NDg5NUQ3NUVGMDc1RCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjBGMzE5NTk3QjhDQzExRThCMTY0ODk1RDc1RUYwNzVEIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjBGMzE5NTk4QjhDQzExRThCMTY0ODk1RDc1RUYwNzVEIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+s5ZPCQAABAVJREFUeNrsndGO3CAMRceI///ldldqpWmU7oQE8LV9vG8rzQyYw7VNAtgri/36+ltp9vVXyAwQgCU2GAogFALFgAFIYoARGYZRSM76KgJUB4iNfQukIh0YNoSJv/0MBIgBxOZ84VPfS4aSSEAUW7fwU4zq5WYQpdgHBusP130gBIeVhsJE+y8AiAGEEBTf7RKpXAwoBJXi/fNOgBhACE2M9zY6w2HpobBAldexrY5wGFAIKeZZe4/fu6lPDSiCKeam37J0UOyOxzP9IPQUtgFFAKW4EmLcwQAKHT8sbEMDiiBQjISZrWAAhX8/NsLRgCJJKJ3cLgvpCEv4gtFIn35qxyTfNKAIrhSL2tmAIhEUE9vbgCJg32x9CtBeWC61WFaVoBZ5oHjQfgMKZyhsw/OqG7+hHUqKv8LvCXmTVQtPKIrmFf+6/8kj3VUOrALF036OtnXg9/qUsmnHOwmYc1VydzAzDGj2PbUD/WuuDSWvkO1nmz4od7+nGhTiCtuWhIEVS7zY1onQqs4I1MILjKsOIK+Q7LvvyichpKhiKA++l1oo+eMHH/gpBiFE2robFAFPmalkFmqGWvBN2CZ6HslJu7q7Qozslfj+HwqSRDFmbMidtak3m1osVOMWwkFnq7OjDiHhFCtXV0LFYAPGIzi8AYqQFx181EM65ZjMkpSiGMPKgVoUA+OK08lBioJxhIM33aflGXm3KKIWxRUjcBxXtp6uRypKYbGv/GC3O3YKG2AQ2oqEkquDRHJaAIw7B7GvKnOTJMItHRTFcgHAiODgRGVzrpXPZIPj61bU4v/AjahJsvPMCSURQ8OGvKouGFePXVbfZgkYGGCoqMUVRUia7DagCJZvbFq3IZQ8GfzEpXEvNfCr7vn4NIsDAtRf2HpZn3Xj8sbl/84gvtafNnjc6hBARVCMJ2BdHdyzg3LFATHU4ubx2DNDgundTUdV4lX9KG97KAHGhhsHp+QmYnAYYIi10eEe9zO/NKAQCS2EErE1BvV2O/WjZvKpWCKKtSknGFFCyKf2O6oe5SqqUQSM6GoBGJhk8vxn8rQyzkQthoyHaBnyjwXqkmcWZVCLGQ/qnkKSMpRgz646fftcQy0ofXNWJZxzsUQ9ct+uTCUyNoHe/GVAARxn/iL5xJLlGKjF0oQUxcBOgYkJBmqxXDVQDECxHGCgFiSft2pxbEpYaRU6iY1PrpatQ9gcn3JfCRYYDBJOwMA0lDbcRbGoBYqBuYoJaoGhGFh8xUAtUIwhKDBCCWoBGKgFOcYDKFCLgmAABaEEAwzyCsDAAIMSFTAII4CBWmAi5SolKopBCAEMQgihhBCCYhBCAIMQgrHyiQEGFhUMwkhhMBh87FKFQpUiab8FGABWKY8jxybTegAAAABJRU5ErkJggg==';
  public iconSize: Point = new Point(30, 30);
  public iconAnchor: Point = new Point(6, 30);
  public popupAnchor: Point = new Point(8, -35);
  public shadowUrl = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACEAAAAsCAMAAADcpCGDAAAB/lBMVEUAAADMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMyzToXrAAAAqnRSTlMABxAYMyc1HwgBBRlJbIWftKKnUiEKBCBdlL3CxMBzA1CXvG1ZwcOuEiqbqopgS0ZjjkIWJpGzghwGI09kQ4aTRQ4ajWhwmrA4drhVCQ+yNw0CPaQ/mKa5DJCAFasTlrFhg1gucr6HrVZ7vy1RLIxMYiUeIimPd0R5LxtOSLdfixdUuhE2tjlAu1uIXm+glUFqqCuemXWsRzwoaTqlCzBmo6l+nbU+NIFcdEKaR/AAAALgSURBVHicbZT7QxJBEMcXRL0OSUQ8RRZQFBAlX3cqokapmIigB74QLUkzfKamSVqplZVmkT20d9m7/7K7PeVusflpZ/dzM9+dmT0AUk0mT1OkZ2QSZ06dCEYqs1Rns9U5mlxt3v/OqfwCXaEe8mbIMWaaTgFEUbEZJk1fojwFlGoMImCx2oxleAZ7efLUXOE4V1lVXVNLyyQSmbpk+PqGSmcj942rqZkRM7ScP5ZgNbsvXER7rbW6NpHQtns6hEtcMnaSaEvp7ejydScJO+NXBBDQ08siWcEaCwz1EZjUfk7CQP5x1lw1hIOeviHsNmE4OBwRlkrfCIdnt5SOYsTlK2NOYeWMdvEJr457W6WA3DYRQRJAmfEaL2lS2ePQSomq6zFBl3Jqmge6ZtjZfpcEmJu/UeLhO+H0CrVfAGRJ9qKEWLoJ6OZOAJZXEGC5lQboFQ0jISgWkE2rwB9HGqya2xRrryhew+4CqPU7ZcNCZe/GZMB/T7+xiRNk5ZZRaM79qV4AmBBUPcCJbp+jXiBQx3wGWIDXFCjCagEYyOQ8YgQWPmQxgFXFo9s8oH7EuxkQBsZxgnwsd/Jj9GQHlXgXQnfKpLIUkWXjIkygdj0NQOsegRPAFKx7Bg3Ddj505LkFmmNsCpHoaNiCwgDkveAKt/8yBXCWR5eLKpZRNOYVV3gd/hpA+ut5l9/7BnXTGedKWz+GA67wAcMext9W8+1s5wdf9w4D1t6HgtTQBzuRWCeA9iNfFpVMCnzyBFaFVWuCHgqhyn7GiuULLRw/DTqL+YKAr1iOWdtO5CRdUww9HPO65JydOfq2eeIsGXVoRNz5EuLwuzsiOjY0hT9+ijrZX/s5dNKT123Y+Pfv7RVF2tt+S2a+L0Gkh6D+IJhsCduzO+miRGK0ERBRuL0n/ueUYU1CAqCP9mDbnOhGj1YbcQCQKqiQtH06F6Qa6fgjdf+mRgCmOR824YupAKBLscH5B+jHltOifUPRAAAAAElFTkSuQmCC';
  public shadowSize: Point = new Point(30, 30);
  public shadowAnchor: Point = new Point(-1, 30);
  
  @Input() markers = [
    {
      locationName: 'Централен плаж Бургас',
      lat: 42.49179,
      long: 27.481198,
      flagType: 'GREEN',
      timestamp: 1537006006219,
    },
    {
      locationName: 'Централен плаж Варна',
      lat: 43.2022661,
      long: 27.9221377,
      flagType: 'RED',
      timestamp: 1537006006219,
    }
  ]

  ngOnInit() {
    navigator.geolocation.getCurrentPosition(position=> {
      this.lat = position.coords.latitude;
      this.lng = position.coords.longitude;
    })
  }

  
}
